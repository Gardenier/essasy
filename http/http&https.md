`https://www.jianshu.com/p/29868fb82890`
####http & https
* 物理层、数据链路层、网络层、传输层、会话层、表示层、应用层
* tpc/ip 属于传输层，主要解决数据如何在网络中传输；http属于应用层，主要解决如何包装数据。web是使用http协议应用层协议，包装好http文本信息，通过tpc/ip做传输层协议发送到网上
* syn：同步序列标号，tcp/ip建立连接使用的握手信号（建立联机）
* ack：确认字符,接收方成功接收到信息时，会回复一个ack数据
* http 三次握手：（建立连接）
   * 第一次握手：客户端发送syn包(syn = X)到服务器，并进入SYN_SEND状态，然后等待服务器响应
   * 第二次握手：服务器端收到syn包，必须确认客户端的ack(ack = X + 1)，同时自己也发送一个syn(syn = y)包，（即syn包+ack确认包），然后进入SYN_RECE状态，
   * 第三次握手：客户端收到服务器的syn+ack包，向服务器发送确认包ack(ack = y + 1),发送完毕之后，客户端和服务器进入established状态，完成三次握手
* 四次挥手：（连接终止协议）
   * 第一次挥手： 主动关闭方发送一个FIN，用来关闭主动方到被动关闭方的数据传送，也就是主动关闭方告诉被动关闭方：我已经不会再给你发数据了(当然，在fin包之前发送出去的数据，如果没有收到对应的ack确认报文，主动关闭方依然会重发这些数据)，但是，此时主动关闭方还可以接受数据。
   * 第二次挥手： 被动关闭方收到FIN包后，发送一个ACK给对方，确认序号为收到序号+1（与SYN相同，一个FIN占用一个序号， SYN 和 FIN 都有seq序号）
   * 第三次挥手： 被动关闭方发送一个FIN，用来关闭被动关闭方到主动关闭方的数据传送，也就是告诉主动关闭方，我的数据也发送完了，不会再给你发数据了。
   * 第四次挥手： 主动关闭方收到FIN后，发送一个ACK给被动关闭方，确认序号为收到序号+1，至此，完成四次挥手。
   * （由于TCP连接是全双工的，因此每个方向都必须单独进行关闭。这原则是当一方完成它的数据发送任务后就能发送一个FIN来终止这个方向的连接。收到一个 FIN只意味着这一方向上没有数据流动，一个TCP连接在收到一个FIN后仍能发送数据。首先进行关闭的一方将执行主动关闭，而另一方执行被动关闭。）
* https 握手过程
   * 1. **客户端发送https请求**
   * 2. **服务器端的配置**
        采用https的服务器必须有一套数字证书，可以是自己制作或者是CA证书，如果是自己制作的证书需要客户端验证通过，否则会弹提示页面，如果是CA证书的话就不会弹提示页面。这套证书其实是一对公钥和私钥，公钥是给别人加密使用的，私密是自己解密用的
   * 3. **传送证书**
        这个证书其实就是公钥，包含了一些信息，例如证书的颁发机构，过期时间等等
   * 4. **客户端解析证书**
        这部分工作是由客户端的TLS来完成的，首先会验证公钥是否有效，如果发现异常会弹出一个警告框，提示证书有问题；如果证书没问题就会生成一个随机值，然后用证书对这个随机值进行加密
   * 5. **传送加密信息**
        其实传送的就是加密后的随机值，目的就是让服务器端拿到这个随机值，然后客户端和服务器端就可以通过这个随机值加密解密了
   * 6. **服务器解密信息**
        服务器通过私钥解密之后得到随机值，然后把内容通过这个值进行对称加密。所谓对称加密就是把信息和私钥通过某种算法混合在一起，这样除非知道私钥，不然无法获得内容，这样客户端和服务器端都知道这个私钥，只要加密算法足够好，这样数据就会足够安全
   * 7. **传送加密后的信息**
   * 8. **客户端解密信息**
        客户端用之前生成的私钥解密信息，从而得到内容
* http vs https
   * 1. https协议需要申请到ca证书或者自制证书
   * 2. http是明文传输，https是具有安全性的ssl加密
   * 3. http是直接与tcp进行数据传输，https是经过一层ssl(osi表示层)，而且http的端口是80(需要国内备案)，htps的是443
   * 4. http的链接没有状态，https是有http+ssl构建的可进行加密传输、身份认证的网络协议，要比http安全

* HTTPS一般使用的加密与HASH算法如下：

   * 非对称加密算法：RSA，DSA/DSS

   * 对称加密算法：AES，RC4，3DES

   * HASH算法：MD5，SHA1，SHA256